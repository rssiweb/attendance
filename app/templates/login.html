{% extends 'base.html' %}1

{% block style %}
   <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/login.css')}}">
{% endblock %}

{% block body %}

<div class="ui middle aligned center aligned grid">
     <div class="column left aligned">
    <h2 class="ui teal image header ">
      <img src="/static/img/logo.jpg" class="image">
      <div class="content">
        Log-in to your account
      </div>
    </h2>
    <form id="loginForm" class="ui large form">
      <div class="ui stacked segment">
        <div class="field">
          <div class="ui left icon input">
            <i class="user icon"></i>
            <input type="text" name="email" placeholder="E-mail address">
          </div>
        </div>
        <div class="field">
          <div class="ui left icon input">
            <i class="lock icon"></i>
            <input type="password" name="password" placeholder="Password">
          </div>
        </div>
        <button type="submit" id="login-btn" class="ui fluid large teal submit button">Login</button>
      </div>
      <div id="error-message" class="ui negative hidden message"></div>
    </form>
    <div class="ui message"></div>
  </div>
</div>

{% endblock %}

{% block script%}
<script type="text/javascript" src="{{ url_for('static', filename='js/login.js') }}"></script>
<script type="text/javascript">
    $('#loginForm').submit(function( event ) {
        event.preventDefault();
        showloading();
        email = $('input[name="email"]').val()
        var password = $('input[name="password"]').val()
        var data = {
            email: email,
            password: password
        };

        $.ajax({
            type: 'POST',
            url: '/api/get_token',
            data: data,
            dataType: "json",
            success: saveToken,
            error: errorgettingToken 
        });
    });
</script>
{% endblock%}